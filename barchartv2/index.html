<!DOCTYPE html>
<html>
<head>
<script src="http://d3js.org/d3.v3.min.js"></script>
  <meta charset="utf-8">
  <title>Bar Chart V2</title>
</head>

<style>
  div.bar {
      display: inline-block;
      width: 20px;
      height: 75px;
      margin-right: 5px; 
      background-color: teal;
  }
</style>

<body>

<script>

  var dataset = [ 5, 10, 13, 19, 21, 25, 22, 18, 15, 13,
                11, 12, 15, 20, 18, 17, 16, 18, 23, 25 ];

  var w = 500;
  var h = 100;
  var barPadding = 1; //for bar width depend on dataset size

  //Create svg element and append to body
  var svg = d3.select('body')
    .append('svg')
      .attr('width', w)
      .attr('height', h);

  svg.selectAll('rect')
      .data(dataset)
    .enter()
    .append('rect')
      .attr('x',function(d,i) { return i*(w/dataset.length); }) //make bar spread out evenly
      .attr('y',function(d) {return h - (d * 4) ;})
      .attr('width', w/dataset.length - barPadding)
      .attr('height', function(d) { return d*4; })
      .attr('fill', function(d) {
        return (d<15) ? 'teal' : 'steelblue';
      });
  
  svg.selectAll('text')
      .data(dataset)
      .enter()
      .append('text')
      .text(function(d) { return d; })
      .attr("x", function(d, i) {
        return i * (w / dataset.length) + (w / dataset.length - barPadding) / 2;
       })
       .attr("y", function(d) {
            return h - (d * 4) + 14;  //15 is now 14
       })
       .attr('font-family', 'sans-serif')
       .attr('font-size', '11px')
       .attr('fill', 'white')
       .attr('text-anchor', 'middle');
</script>

</body>

</html>